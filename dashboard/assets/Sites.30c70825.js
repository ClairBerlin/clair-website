import{q as C,s as c,E as g,r as D,u as o,o as a,e as v,c as i,d as n,w as m,a as e,t as s,x as L,g as w,F as B,l as M,n as N,b as _,ag as V,a7 as I}from"./vendor.d09266b0.js";import{_ as O}from"./DeletionModal.6046e693.js";import{L as z}from"./index.1c91f241.js";const E={key:1,class:"text-md mt-8"},F={class:"text-sm text-gray-500"},q={class:"flex justify-end items-center"},A={class:"flex flex-row"},R={class:"overflow-hidden rounded-md ring-1 ring-gray-300 bg-white min-w-full divide-y divide-gray-200"},T={class:"bg-gray-50"},G={scope:"col",class:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},H={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider hidden sm:table-cell"},J={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},K={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},P={class:"hidden sm:table-cell px-2 sm:px-6 py-4 whitespace-nowrap"},Q={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},U={class:"flex flex-col sm:flex-row"},W=e("div",{class:"flex flex-row"},null,-1),X=["onClick"],Y={key:2,class:"shadow-md mt-4 rounded-md max-w-sm flex items-center bg-yellow-50 border-l-4 border-yellow-400 p-4"},Z={class:"flex"},ee={class:"flex-shrink-0"},te={class:"ml-3"},ne={setup(se){const d=C(),y=c(()=>d.getters["nav/isOrgContextLoading"]),h=c(()=>d.getters["nav/isOwner"]),x=c(()=>d.getters["nav/getSites"]),k=c(()=>{var t;return((t=x.value)==null?void 0:t.length)>0}),u=g(!1),r=g(),b=()=>u.value=!0,$=async()=>{console.log(`Deleting site with ID ${r.value}`),await d.dispatch("jv/delete",`sites/${r.value}`),d.commit("jv/deleteRecord",{_jv:{type:"Site",id:r.value}})},S=t=>`${t.street1}, ${t.zip} ${t.city}`;return(t,f)=>{const p=D("router-link");return o(y)?(a(),v(z,{key:0})):o(k)?(a(),i("div",E,[n(O,{open:u.value,onCloseModal:f[0]||(f[0]=l=>u.value=!1),onDeleteClicked:$,"modal-title":"delete-site-modal.title"},{default:m(()=>[e("p",F,s(t.$t("delete-site-modal.message")),1)]),_:1},8,["open"]),e("div",q,[e("div",A,[o(h)?(a(),v(p,{key:0,class:"m-2 mr-0 gray-button font-semibold",to:{name:"addSite"}},{default:m(()=>[n(o(L),{class:"w-4 h-4 mr-2"}),e("span",null,s(t.$t("site.add")),1)]),_:1})):w("",!0)])]),e("table",R,[e("thead",T,[e("tr",null,[e("th",G,s(t.$t("site.name")),1),e("th",H,s(t.$t("address.singular")),1),e("th",J,s(t.$t("action")),1)])]),e("tbody",null,[(a(!0),i(B,null,M(o(x),(l,j)=>(a(),i("tr",{key:l._jv.id,class:N([j%2==0?"bg-white":"bg-gray-50"])},[e("td",K,[n(p,{class:"como-link",to:{name:"site",params:{siteId:l._jv.id}}},{default:m(()=>[_(s(l.name),1)]),_:2},1032,["to"])]),e("td",P,s(S(l.address)),1),e("td",Q,[e("div",U,[W,o(h)?(a(),i("div",{key:0,class:"btn-sm m-2 mr-0 gray-button font-semibold w-max",onClick:()=>{b(),r.value=l._jv.id}},[n(o(V),{class:"w-4 h-4 mr-2"}),e("span",null,s(t.$t("remove")),1)],8,X)):w("",!0)])])],2))),128))])])])):(a(),i("div",Y,[e("div",Z,[e("div",ee,[n(o(I),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",te,[_(s(t.$t("org.noSite"))+". ",1),n(p,{to:{name:"addSite"},class:"font-medium underline text-yellow-700 hover:text-yellow-600"},{default:m(()=>[_(s(t.$t("org.addSite"))+". ",1)]),_:1})])])]))}}};export{ne as default};
