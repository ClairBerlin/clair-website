import{D as C,u as j,c as v,G as y,r as M,o as n,f as i,b as e,t as o,j as g,g as a,w as m,d as r,x as N,F as w,q as B,n as D,e as u,a as z,ah as L,B as R,a8 as V}from"./vendor.c632a9d3.js";import{r as S}from"./index.ce7b7c95.js";import{_ as E}from"./DeletionModal.8e0bf4a3.js";import{_ as F}from"./index.36f78768.js";const T={class:"border-b border-gray-200 bg-white"},q={key:0,class:"mx-auto max-w-screen-xl px-4 pt-12 pb-4"},G={class:""},W={class:"text-3xl font-bold leading-tight text-gray-900"},Y={class:"mx-auto mt-4 max-w-screen-xl px-4 py-6"},A={class:"sm:flex sm:items-center"},H={class:"sm:flex-auto"},J={class:"text-xl font-semibold text-gray-900"},K={class:"mt-2 text-sm text-gray-700"},P={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Q={key:0,class:""},U={class:"text-sm text-gray-500"},X={class:"mt-8 flex flex-col"},Z={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},ee={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},te={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-md"},se={class:"min-w-full divide-y divide-gray-300"},oe={class:"bg-gray-50 text-sm font-medium text-gray-900"},ae={scope:"col",class:"px-2 py-3 text-left sm:px-6"},le={scope:"col",class:"hidden py-3 text-left sm:table-cell sm:px-6"},ne={scope:"col",class:"px-2 py-3 text-left sm:px-6"},re={class:"whitespace-nowrap px-2 py-4 sm:px-6"},ie={class:"whitespace-nowrap px-2 py-4 sm:px-6"},de={class:"whitespace-nowrap px-2 py-4 sm:px-6"},ce={class:"flex flex-row"},me={class:"flex items-center"},pe=["onClick","data-tip"],he={class:"flex items-center"},_e={key:1,class:"mt-4 flex max-w-sm items-center rounded-sm border-l-4 border-yellow-400 bg-yellow-50 p-4 shadow-md"},ge={class:"flex-shrink-0"},ue={class:"ml-3"},xe=u(" You are not a member of any organization yet. "),fe=u(" Click here to create one "),ke={setup(ve){const{t:x}=C(),p=j(),h=v(()=>p.state.authuser.memberships),b=()=>{var t;return((t=h.value)==null?void 0:t.length)>0},$=v(()=>Object.assign(...h.value.map(({orgId:t,orgName:l})=>{const d=p.getters["jv/get"]("Membership",`$[?(@.organization_name=="${l}")]`),s=Object.entries(d).map(([,c])=>c);return{[t]:s.filter(c=>c.role==="O")}}))),k=({orgId:t,role:l})=>l!=="O"?!1:$.value[t].length>1,_=y(!1),I=()=>_.value=!0,f=y({}),O=async()=>{const{mId:t,orgId:l}=f.value;console.log(`Removing OWNER with ID ${t} from the organization with ID ${l}`),await p.dispatch("jv/delete",`memberships/${t}`),p.commit("jv/deleteRecord",{_jv:{type:"Membership",id:t}})};return(t,l)=>{const d=M("router-link");return n(),i(w,null,[e("div",T,[t.$route.meta.title?(n(),i("header",q,[e("div",G,[e("h1",W,o(t.$t("org.all")),1)])])):g("",!0)]),a(F),e("div",Y,[e("div",A,[e("div",H,[e("h1",J,o(t.$t("org.title")),1),e("p",K,o(t.$t("org.description")),1)]),e("div",P,[a(d,{class:"indigo-button",to:{name:"org-management-add"}},{default:m(()=>[a(r(N),{class:"mr-2 h-4 w-4"}),e("span",null,o(t.$t("org.create")),1)]),_:1})])]),b?(n(),i("div",Q,[a(E,{open:_.value,onCloseModal:l[0]||(l[0]=s=>_.value=!1),onDeleteClicked:O,"modal-title":"owner-leave-modal.title"},{default:m(()=>[e("p",U,o(t.$t("owner-leave-modal.message")),1)]),_:1},8,["open"]),e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("table",se,[e("thead",oe,[e("tr",null,[e("th",ae,o(t.$t("org.name")),1),e("th",le,o(t.$t("role.your")),1),e("th",ne,o(t.$t("options")),1)])]),e("tbody",null,[(n(!0),i(w,null,B(r(h),(s,c)=>(n(),i("tr",{key:s.orgId,class:D([c%2===0?"bg-white":"bg-gray-50"])},[e("td",re,[a(d,{class:"como-link",to:{name:"org-management-detail",params:{orgId:s.orgId}}},{default:m(()=>[u(o(s.orgName),1)]),_:2},1032,["to"])]),e("td",ie,o(t.$t(r(S)(s.role))),1),e("td",de,[e("div",ce,[s.role==="O"?(n(),z(d,{key:0,class:"gray-button tooltip p-3","data-tip":r(x)("edit"),to:{name:"org-management-edit",params:{orgId:s.orgId}}},{default:m(()=>[e("div",me,[a(r(L),{class:"h-5 w-5"})])]),_:2},1032,["data-tip","to"])):g("",!0),k(s)?(n(),i("button",{key:1,onClick:()=>{I(),f.value={orgId:s.orgId,mId:s.id}},type:"button","data-tip":r(x)("leave"),class:"gray-button tooltip ml-3 bg-red-600 p-3 hover:bg-red-700"},[e("div",he,[a(r(R),{class:"h-5 w-5 text-red-100"})])],8,pe)):g("",!0)])])],2))),128))])])])])])])])):(n(),i("div",_e,[e("div",ge,[a(r(V),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",ue,[xe,a(d,{to:{name:"org-management-add"},class:"font-medium text-yellow-700 underline hover:text-yellow-600"},{default:m(()=>[fe]),_:1})])]))])],64)}}};export{ke as default};
