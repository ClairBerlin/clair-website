import{u as C,c,E as g,r as D,d as o,o as a,a as v,f as i,g as n,w as m,b as e,t as s,x as L,i as w,F as B,p as M,n as N,e as _,ak as V,a7 as I}from"./vendor.5ded90fb.js";import{_ as O}from"./DeletionModal.4f72053f.js";import{L as z}from"./index.7b5b849e.js";const E={key:1,class:"text-md mt-8"},F={class:"text-sm text-gray-500"},A={class:"flex justify-end items-center"},R={class:"flex flex-row"},T={class:"overflow-hidden rounded-md ring-1 ring-gray-300 bg-white min-w-full divide-y divide-gray-200"},q={class:"bg-gray-50"},G={scope:"col",class:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},H={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider hidden sm:table-cell"},J={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},K={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},P={class:"hidden sm:table-cell px-2 sm:px-6 py-4 whitespace-nowrap"},Q={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},U={class:"flex flex-col sm:flex-row"},W=e("div",{class:"flex flex-row"},null,-1),X=["onClick"],Y={key:2,class:"shadow-md mt-4 rounded-md max-w-sm flex items-center bg-yellow-50 border-l-4 border-yellow-400 p-4"},Z={class:"flex"},ee={class:"flex-shrink-0"},te={class:"ml-3"},ne={setup(se){const d=C(),y=c(()=>d.getters["nav/isOrgContextLoading"]),h=c(()=>d.getters["nav/isOwner"]),f=c(()=>d.getters["nav/getSites"]),b=c(()=>{var t;return((t=f.value)==null?void 0:t.length)>0}),p=g(!1),r=g(),k=()=>p.value=!0,$=async()=>{console.log(`Deleting site with ID ${r.value}`),await d.dispatch("jv/delete",`sites/${r.value}`),d.commit("jv/deleteRecord",{_jv:{type:"Site",id:r.value}})},S=t=>`${t.street1}, ${t.zip} ${t.city}`;return(t,x)=>{const u=D("router-link");return o(y)?(a(),v(z,{key:0})):o(b)?(a(),i("div",E,[n(O,{open:p.value,onCloseModal:x[0]||(x[0]=l=>p.value=!1),onDeleteClicked:$,"modal-title":"delete-site-modal.title"},{default:m(()=>[e("p",F,s(t.$t("delete-site-modal.message")),1)]),_:1},8,["open"]),e("div",A,[e("div",R,[o(h)?(a(),v(u,{key:0,class:"m-2 mr-0 gray-button font-semibold",to:{name:"addSite"}},{default:m(()=>[n(o(L),{class:"w-4 h-4 mr-2"}),e("span",null,s(t.$t("site.add")),1)]),_:1})):w("",!0)])]),e("table",T,[e("thead",q,[e("tr",null,[e("th",G,s(t.$t("site.name")),1),e("th",H,s(t.$t("address.singular")),1),e("th",J,s(t.$t("action")),1)])]),e("tbody",null,[(a(!0),i(B,null,M(o(f),(l,j)=>(a(),i("tr",{key:l._jv.id,class:N([j%2==0?"bg-white":"bg-gray-50"])},[e("td",K,[n(u,{class:"como-link",to:{name:"site",params:{siteId:l._jv.id}}},{default:m(()=>[_(s(l.name),1)]),_:2},1032,["to"])]),e("td",P,s(S(l.address)),1),e("td",Q,[e("div",U,[W,o(h)?(a(),i("div",{key:0,class:"btn-sm m-2 mr-0 gray-button font-semibold w-max",onClick:()=>{k(),r.value=l._jv.id}},[n(o(V),{class:"w-4 h-4 mr-2"}),e("span",null,s(t.$t("remove")),1)],8,X)):w("",!0)])])],2))),128))])])])):(a(),i("div",Y,[e("div",Z,[e("div",ee,[n(o(I),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",te,[_(s(t.$t("org.noSite"))+". ",1),n(u,{to:{name:"addSite"},class:"font-medium underline text-yellow-700 hover:text-yellow-600"},{default:m(()=>[_(s(t.$t("org.addSite"))+". ",1)]),_:1})])])]))}}};export{ne as default};
