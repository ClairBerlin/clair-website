import{o as n,c as b,a,u as M,b as N,d as f,r as w,e as z,f as i,g as e,t as o,h as g,_ as B,w as m,i as l,j as L,F as y,k as D,n as R,l as x,m as V,p as S}from"./index.5094c426.js";import{r as E}from"./index.86e5ff1d.js";import{_ as F}from"./DeletionModal.7a655758.js";function H(k,p){return n(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])}const T={class:"border-b border-gray-200 bg-white"},W={key:0,class:"mx-auto max-w-screen-xl px-4 pt-12 pb-4"},Y={class:""},q={class:"text-3xl font-bold leading-tight text-gray-900"},A={class:"mx-auto mt-4 max-w-screen-xl px-4 py-6"},G={class:"sm:flex sm:items-center"},J={class:"sm:flex-auto"},K={class:"text-xl font-semibold text-gray-900"},P={class:"mt-2 text-sm text-gray-700"},Q={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},U={key:0,class:""},X={class:"text-sm text-gray-500"},Z={class:"mt-8 flex flex-col"},ee={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},te={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},se={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-md"},oe={class:"min-w-full divide-y divide-gray-300"},ae={class:"bg-gray-50 text-sm font-medium text-gray-900"},ne={scope:"col",class:"px-2 py-3 text-left sm:px-6"},re={scope:"col",class:"hidden py-3 text-left sm:table-cell sm:px-6"},le={scope:"col",class:"px-2 py-3 text-left sm:px-6"},ie={class:"whitespace-nowrap px-2 py-4 sm:px-6"},de={class:"whitespace-nowrap px-2 py-4 sm:px-6"},ce={class:"whitespace-nowrap px-2 py-4 sm:px-6"},me={class:"flex flex-row"},he={class:"flex items-center"},pe=["onClick","data-tip"],_e={class:"flex items-center"},ue={key:1,class:"mt-4 flex max-w-sm items-center rounded-sm border-l-4 border-yellow-400 bg-yellow-50 p-4 shadow-md"},ge={class:"flex-shrink-0"},xe={class:"ml-3"},ve=x(" You are not a member of any organization yet. "),fe=x(" Click here to create one "),ke={setup(k){const{t:p}=M(),h=N(),_=f(()=>h.state.authuser.memberships),$=()=>{var t;return((t=_.value)==null?void 0:t.length)>0},I=f(()=>Object.assign(..._.value.map(({orgId:t,orgName:r})=>{const d=h.getters["jv/get"]("Membership",`$[?(@.organization_name=="${r}")]`),s=Object.entries(d).map(([,c])=>c);return{[t]:s.filter(c=>c.role==="O")}}))),O=({orgId:t,role:r})=>r!=="O"?!1:I.value[t].length>1,u=w(!1),C=()=>u.value=!0,v=w({}),j=async()=>{const{mId:t,orgId:r}=v.value;console.log(`Removing OWNER with ID ${t} from the organization with ID ${r}`),await h.dispatch("jv/delete",`memberships/${t}`),h.commit("jv/deleteRecord",{_jv:{type:"Membership",id:t}})};return(t,r)=>{const d=z("router-link");return n(),i(y,null,[e("div",T,[t.$route.meta.title?(n(),i("header",W,[e("div",Y,[e("h1",q,o(t.$t("org.all")),1)])])):g("",!0)]),a(B),e("div",A,[e("div",G,[e("div",J,[e("h1",K,o(t.$t("org.title")),1),e("p",P,o(t.$t("org.description")),1)]),e("div",Q,[a(d,{class:"indigo-button",to:{name:"org-management-add"}},{default:m(()=>[a(l(L),{class:"mr-2 h-4 w-4"}),e("span",null,o(t.$t("org.create")),1)]),_:1})])]),$?(n(),i("div",U,[a(F,{open:u.value,onCloseModal:r[0]||(r[0]=s=>u.value=!1),onDeleteClicked:j,"modal-title":"owner-leave-modal.title"},{default:m(()=>[e("p",X,o(t.$t("owner-leave-modal.message")),1)]),_:1},8,["open"]),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("table",oe,[e("thead",ae,[e("tr",null,[e("th",ne,o(t.$t("org.name")),1),e("th",re,o(t.$t("role.your")),1),e("th",le,o(t.$t("options")),1)])]),e("tbody",null,[(n(!0),i(y,null,D(l(_),(s,c)=>(n(),i("tr",{key:s.orgId,class:R([c%2===0?"bg-white":"bg-gray-50"])},[e("td",ie,[a(d,{class:"como-link",to:{name:"org-management-detail",params:{orgId:s.orgId}}},{default:m(()=>[x(o(s.orgName),1)]),_:2},1032,["to"])]),e("td",de,o(t.$t(l(E)(s.role))),1),e("td",ce,[e("div",me,[s.role==="O"?(n(),b(d,{key:0,class:"gray-button tooltip p-3","data-tip":l(p)("edit"),to:{name:"org-management-edit",params:{orgId:s.orgId}}},{default:m(()=>[e("div",he,[a(l(H),{class:"h-5 w-5"})])]),_:2},1032,["data-tip","to"])):g("",!0),O(s)?(n(),i("button",{key:1,onClick:()=>{C(),v.value={orgId:s.orgId,mId:s.id}},type:"button","data-tip":l(p)("leave"),class:"gray-button tooltip ml-3 bg-red-600 p-3 hover:bg-red-700"},[e("div",_e,[a(l(V),{class:"h-5 w-5 text-red-100"})])],8,pe)):g("",!0)])])],2))),128))])])])])])])])):(n(),i("div",ue,[e("div",ge,[a(l(S),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",xe,[ve,a(d,{to:{name:"org-management-add"},class:"font-medium text-yellow-700 underline hover:text-yellow-600"},{default:m(()=>[fe]),_:1})])]))])],64)}}};export{ke as default};
