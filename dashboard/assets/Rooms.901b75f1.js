import{s as O,q as z,v as m,G as f,S as I,U as R,r as C,o as a,c as i,t as s,u as _,a as e,b as n,F as v,l as V,n as N,d as h,w as g,g as B,a6 as F}from"./vendor.2f240eb0.js";const S=e("div",{class:"bg-white shadow-md p-4 rounded-md max-w-xl mx-auto"},[e("pre",null,"VIEW DESCRIPTION (will be removed)"),n(" This view will list all rooms of the selected organization, information about each room, air quality information of the individual sensors installed in the room (once we know how to best summarize this information), and links to the visualization for each sensor. Once we learn how to synthesize information from multiple sensors in a single room, this information may be viewed here as well. ")],-1),q={key:0},E={key:1,class:"ring-1 ring-gray-300 rounded-md bg-white text-md overflow-hidden mt-8"},L={class:"min-w-full divide-y divide-gray-200"},M={class:"bg-gray-50"},P={scope:"col",class:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},T={scope:"col",class:"sm:px-6 py-3 text-right text-xs font-medium text-gray-500 tracking-wider"},D=e("sup",null,"2",-1),G=n("] "),U={scope:"col",class:"sm:px-6 py-3 text-right text-xs font-medium text-gray-500 tracking-wider"},W={scope:"col",class:"sm:px-6 py-3 text-right text-xs font-medium text-gray-500 tracking-wider hidden md:table-cell"},A={scope:"col",class:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},H={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},J={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},K={class:"px-2 sm:px-6 py-4 whitespace-nowrap text-right"},Q={class:"px-2 sm:px-6 py-4 whitespace-nowrap text-right"},X={class:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-right"},Y={class:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-right"},Z={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},ee={class:"flex flex-col sm:flex-row"},te={class:"flex flex-row"},se=["onClick"],oe={key:2,class:"shadow-md mt-4 rounded-md max-w-sm flex items-center bg-yellow-50 border-l-4 border-yellow-400 p-4"},ae={class:"flex"},ie={class:"flex-shrink-0"},ne={class:"ml-3"},ce={setup(re){const w=O(),l=z(),y=m(()=>w.params.orgId),p=f(void 0),b=m(()=>{var t;return((t=p.value)==null?void 0:t.length)>0}),u=f(!0),k=m(()=>l.getters["authuser/getMembershipByOrgId"](w.params.orgId)),$=m(()=>{var t;return((t=k.value)==null?void 0:t.role)==="O"}),j=async t=>{await l.dispatch("jv/delete",`rooms/${t}`),x()};async function x(){u.value=!0;const t=await l.dispatch("jv/get",["rooms",{params:{"filter[organization]":y.value}}]),d=Object.entries(t);console.log(`Organization has ${d.length} room(s).`),p.value=d.map(([o,c])=>c);const r=d.map(([o,c])=>(console.log(`Fetch related objects for room ${o}.`),l.dispatch("jv/getRelated",`rooms/${o}`)));await Promise.all(r),u.value=!1}return I(async()=>x()),R(y,()=>x()),(t,d)=>{const r=C("router-link");return a(),i(v,null,[S,u.value?(a(),i("div",q,s(t.$t("loading...")),1)):_(b)?(a(),i("div",E,[e("table",L,[e("thead",M,[e("tr",null,[e("th",P,s(t.$t("room.name")),1),e("th",T,[n(s(t.$t("room.size"))+" [m",1),D,G]),e("th",U,s(t.$t("room.height"))+" [m] ",1),e("th",W,s(t.$t("room.maxOccupancy")),1),e("th",A,s(t.$t("site.singular")),1),e("th",H,s(t.$t("action")),1)])]),e("tbody",null,[(a(!0),i(v,null,V(p.value,(o,c)=>(a(),i("tr",{key:o._jv.id,class:N([c%2==0?"bg-white":"bg-gray-50"])},[e("td",J,s(o.name),1),e("td",K,s(o.size_sqm),1),e("td",Q,s(o.height_m),1),e("td",X,s(o.max_occupancy),1),e("td",Y,[h(r,{class:"font-medium underline text-yellow-700 hover:text-yellow-600",to:{name:"site",params:{siteId:o.site._jv.id}}},{default:g(()=>[n(s(o.site.name),1)]),_:2},1032,["to"])]),e("td",Z,[e("div",ee,[e("div",te,[h(r,{class:"btn-sm m-2 mr-0 gray-button font-semibold w-max",to:{name:"room",params:{roomId:o._jv.id}}},{default:g(()=>[n(s(t.$t("inspect")),1)]),_:2},1032,["to"])]),_($)?(a(),i("div",{key:0,class:"btn-sm m-2 mr-0 gray-button font-semibold w-max",onClick:le=>j(o._jv.id)},s(t.$t("remove")),9,se)):B("",!0)])])],2))),128))])])])):(a(),i("div",oe,[e("div",ae,[e("div",ie,[h(_(F),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",ne,[n(s(t.$t("room.noRoom"))+". ",1),h(r,{to:"sites",class:"font-medium underline text-yellow-700 hover:text-yellow-600"},{default:g(()=>[e("div",null,s(t.$t("room.siteForRoom"))+". ",1)]),_:1})])])]))],64)}}};export{ce as default};
