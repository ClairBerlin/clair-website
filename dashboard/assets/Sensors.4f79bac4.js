import{s as b,q as k,v as x,G as g,S as $,U as j,r as N,o as a,c as n,t as s,u as y,a as e,F as C,l as O,n as S,d as m,w,b as p,a7 as z}from"./vendor.eafa4657.js";const B={key:0},F={key:1,class:"ring-1 ring-gray-300 rounded-md bg-white text-md overflow-hidden mt-8"},L={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-gray-50"},V={scope:"col",class:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},I={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider hidden xl:table-cell"},P={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider hidden sm:table-cell"},q={scope:"col",class:"px-2 sm:px-6 py-3 text-xs font-medium text-gray-500 tracking-wider text-right"},D={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},E={class:"hidden xl:table-cell sm:px-6 py-4 whitespace-nowrap"},G={class:""},M={class:"hidden sm:table-cell sm:px-6 py-4 whitespace-nowrap"},T={class:"px-2 sm:px-6 py-4 whitespace-nowrap text-right"},U={key:2,class:"shadow-md mt-4 rounded-md max-w-sm flex items-center bg-yellow-50 border-l-4 border-yellow-400 p-4"},A={class:"flex"},H={class:"flex-shrink-0"},J={class:"ml-3"},W={setup(K){const f=b(),h=k(),u=x(()=>f.params.orgId),i=g(void 0),v=x(()=>{var t;return((t=i.value)==null?void 0:t.length)>0}),c=g(!0);async function _(){c.value=!0;const t=await h.dispatch("jv/get",["nodes",{params:{"filter[organization]":u.value}}]),d=Object.entries(t);console.log(`Organization has ${d.length} sensor(s).`),i.value=d.map(([o,r])=>r);const l=d.map(([o,r])=>(console.log(`Fetch related objects for sensor ${o}.`),h.dispatch("jv/getRelated",`nodes/${o}`)));await Promise.all(l),c.value=!1}return $(async()=>_()),j(u,()=>_()),(t,d)=>{const l=N("router-link");return c.value?(a(),n("div",B,s(t.$t("loading...")),1)):y(v)?(a(),n("div",F,[e("table",L,[e("thead",R,[e("tr",null,[e("th",V,s(t.$t("node.name")),1),e("th",I,s(t.$t("node.identifier")),1),e("th",P,s(t.$t("node.model")),1),e("th",q,s(t.$t("node.sampleCount")),1)])]),e("tbody",null,[(a(!0),n(C,null,O(i.value,(o,r)=>(a(),n("tr",{key:o._jv.id,class:S([r%2==0?"bg-white":"bg-gray-50"])},[e("td",D,[m(l,{class:"como-link",to:{name:"sensor",params:{sensorId:o._jv.id}}},{default:w(()=>[p(s(o.alias),1)]),_:2},1032,["to"])]),e("td",E,[e("pre",G,s(o._jv.id),1)]),e("td",M,s(o.model.trade_name),1),e("td",T,s(o.sample_count),1)],2))),128))])])])):(a(),n("div",U,[e("div",A,[e("div",H,[m(y(z),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",J,[p(s(t.$t("node.noNodes"))+" "+s(" "),1),m(l,{to:"#",class:"font-medium underline text-yellow-700 hover:text-yellow-600"},{default:w(()=>[p(s(t.$t("node.addNode"))+". ",1)]),_:1})])])]))}}};export{W as default};
