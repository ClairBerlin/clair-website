import{s as k,q as $,v as w,G as g,S as j,U as N,r as T,o as a,c as n,t as s,u as v,a as e,F as f,l as O,n as C,d as m,w as x,b as d,a6 as I}from"./vendor.2f240eb0.js";const S=e("div",{class:"bg-white shadow-md p-4 rounded-md max-w-xl mx-auto"},[e("pre",null,"VIEW DESCRIPTION (will be removed)"),d(" This view will provide an overview of all sensors that belong to the selected organization, their make and type, the current installation (with a link to the inspection views of the room and the sensor installation), historical installations, and actions to register a new sensor with The Things Network and to completely remove a sensor both from the COMo stack and from The Things Network. ")],-1),z={key:0},R={key:1,class:"ring-1 ring-gray-300 rounded-md bg-white text-md overflow-hidden mt-8"},V={class:"min-w-full divide-y divide-gray-200"},B={class:"bg-gray-50"},E={scope:"col",class:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},F={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider hidden md:table-cell"},L={scope:"col",class:"sm:px-6 py-3 text-left text-xs font-medium text-gray-500 tracking-wider"},P={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},D={class:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap"},M={class:""},q={class:"px-2 sm:px-6 py-4 whitespace-nowrap"},G={class:"flex flex-row"},U={key:2,class:"shadow-md mt-4 rounded-md max-w-sm flex items-center bg-yellow-50 border-l-4 border-yellow-400 p-4"},W={class:"flex"},A={class:"flex-shrink-0"},H={class:"ml-3"},Q={setup(J){const y=k(),p=$(),u=w(()=>y.params.orgId),c=g(void 0),b=w(()=>{var t;return((t=c.value)==null?void 0:t.length)>0}),h=g(!0);async function _(){h.value=!0;const t=await p.dispatch("jv/get",["nodes",{params:{"filter[organization]":u.value}}]),i=Object.entries(t);console.log(`Organization has ${i.length} sensor(s).`),c.value=i.map(([o,r])=>r);const l=i.map(([o,r])=>(console.log(`Fetch related objects for sensor ${o}.`),p.dispatch("jv/getRelated",`nodes/${o}`)));await Promise.all(l),h.value=!1}return j(async()=>_()),N(u,()=>_()),(t,i)=>{const l=T("router-link");return a(),n(f,null,[S,h.value?(a(),n("div",z,s(t.$t("loading...")),1)):v(b)?(a(),n("div",R,[e("table",V,[e("thead",B,[e("tr",null,[e("th",E,s(t.$t("node.name")),1),e("th",F,s(t.$t("node.identifier")),1),e("th",L,s(t.$t("action")),1)])]),e("tbody",null,[(a(!0),n(f,null,O(c.value,(o,r)=>(a(),n("tr",{key:o._jv.id,class:C([r%2==0?"bg-white":"bg-gray-50"])},[e("td",P,s(o.alias),1),e("td",D,[e("pre",M,s(o._jv.id),1)]),e("td",q,[e("div",G,[m(l,{class:"gray-button",to:{name:"sensor",params:{sensorId:o._jv.id}}},{default:x(()=>[d(s(t.$t("inspect")),1)]),_:2},1032,["to"])])])],2))),128))])])])):(a(),n("div",U,[e("div",W,[e("div",A,[m(v(I),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",H,[d(s(t.$t("node.noNode"))+". ",1),m(l,{to:"#",class:"font-medium underline text-yellow-700 hover:text-yellow-600"},{default:x(()=>[d(s(t.$t("node.addNode"))+". ",1)]),_:1})])])]))],64)}}};export{Q as default};
